input: "# XXX - trigger alt-1 to hit command window for necessary commands?\n# ex:\
  \ user.windbg_insert_in_cmd()\n#    edit.left()\n\nmode: user.windbg\n-\ntag():\
  \ user.debugger\ntag(): user.windbg\nregister <user.registers>:\n    key(@)\n  \
  \  insert(\"{registers}\")\n\nopen help: insert(\".hh\\n\")\n\n# xxx - add window\
  \ switching\n\nadd microsoft symbols:\n    insert(\"srv*C:\\\\symbols*http://msdl.microsoft.com/download/symbols;\\\
  n\")\nforce reload symbols:\n    insert(\".reload /f\\n\")\nreload symbols:\n  \
  \  insert(\".reload\\n\")\nloaded modules:\n    insert(\"lm l\\n\")\n\ndisplay pointers:\n\
  \    insert(\"dps \")\n\n# XXX - should be generic\ndereference pointer:\n    user.insert_between(\"\
  poi(\", \")\")\n\nshow version: key(ctrl-alt-w)\n\n##\n# Windows\n##\n\nview command:\
  \ key(alt-1)\nview watch: key(alt-2)\nview locals: key(alt-3)\nview registers: key(alt-4)\n\
  view memory: key(alt-5)\nview call stack: key(alt-6)\nview disassembly: key(alt-7)\n\
  view scratch pad: key(alt-8)\nview (processes|threads): key(alt-9)\n\n# XXX - temp\n\
  dump function params: \"r @rcx,@rdx,@r8,@r9\\n\"\n\n(lib|library) <user.windows_dlls>:\
  \ \"{windows_dlls}\"\n"
output:
  type: source_file
  children:
  - text: '# XXX - trigger alt-1 to hit command window for necessary commands?'
    type: comment
  - text: '# ex: user.windbg_insert_in_cmd()'
    type: comment
  - text: '#    edit.left()'
    type: comment
  - type: context
    children:
    - type: match
      key:
        text: mode
        type: identifier
      pattern:
        text: ' user.windbg'
        type: implicit_string
  - type: include_tag
    tag:
      text: user.debugger
      type: identifier
  - type: include_tag
    tag:
      text: user.windbg
      type: identifier
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: register
          type: word
        - type: capture
          capture_name:
            text: user.registers
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: '@'
            type: implicit_string
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: '{'
                type: string_content
              - text: registers
                type: string_content
              - text: '}'
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: open
          type: word
        - text: help
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: .hh
                type: string_content
              - text: \n
                type: string_escape_sequence
  - text: '# xxx - add window switching'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: add
          type: word
        - text: microsoft
          type: word
        - text: symbols
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: 'srv*C:'
                type: string_content
              - text: \\
                type: string_escape_sequence
              - text: symbols*http://msdl.microsoft.com/download/symbols;
                type: string_content
              - text: \n
                type: string_escape_sequence
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: force
          type: word
        - text: reload
          type: word
        - text: symbols
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: .reload /f
                type: string_content
              - text: \n
                type: string_escape_sequence
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: reload
          type: word
        - text: symbols
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: .reload
                type: string_content
              - text: \n
                type: string_escape_sequence
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: loaded
          type: word
        - text: modules
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: lm l
                type: string_content
              - text: \n
                type: string_escape_sequence
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: display
          type: word
        - text: pointers
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: 'dps '
                type: string_content
  - text: '# XXX - should be generic'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: dereference
          type: word
        - text: pointer
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.insert_between
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: poi(
                type: string_content
            - type: string
              children:
              - text: )
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: show
          type: word
        - text: version
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: ctrl-alt-w
            type: implicit_string
  - text: '##'
    type: comment
  - text: '# Windows'
    type: comment
  - text: '##'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: command
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-1
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: watch
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-2
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: locals
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-3
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: registers
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-4
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: memory
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-5
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: call
          type: word
        - text: stack
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-6
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: disassembly
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-7
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - text: scratch
          type: word
        - text: pad
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-8
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: view
          type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: processes
              type: word
            - text: threads
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-9
            type: implicit_string
  - text: '# XXX - temp'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: dump
          type: word
        - text: function
          type: word
        - text: params
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: string
          children:
          - text: r @rcx,@rdx,@r8,@r9
            type: string_content
          - text: \n
            type: string_escape_sequence
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: lib
              type: word
            - text: library
              type: word
        - type: capture
          capture_name:
            text: user.windows_dlls
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: string
          children:
          - text: '{'
            type: string_content
          - text: windows_dlls
            type: string_content
          - text: '}'
            type: string_content
