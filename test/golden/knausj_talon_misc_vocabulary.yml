input: "mode: command\nmode: dictation\n-\ncopy to vocab [as <phrase>]$: user.add_selection_to_vocabulary(phrase\
  \ or \"\")\n# Automatically adds possessive form by appending \"'s\".\ncopy name\
  \ to vocab [as <phrase>]$: user.add_selection_to_vocabulary(phrase or \"\", \"name\"\
  )\n# Automatically adds plural form by simply appending \"s\".\ncopy noun to vocab\
  \ [as <phrase>]$: user.add_selection_to_vocabulary(phrase or \"\", \"noun\")\ncopy\
  \ to replacements as <phrase>$: user.add_selection_to_words_to_replace(phrase)\n\
  # Automatically adds possessive form by appending \"'s\".\ncopy name to replacements\
  \ as <phrase>$: user.add_selection_to_words_to_replace(phrase, \"name\")\n# Automatically\
  \ adds plural form by simply appending \"s\".\ncopy noun to replacements as <phrase>$:\
  \ user.add_selection_to_words_to_replace(phrase, \"noun\")\n"
output:
  type: source_file
  children:
  - type: context
    children:
    - type: or
      children:
      - type: match
        key:
          text: mode
          type: identifier
        pattern:
          text: ' command'
          type: implicit_string
      - type: match
        key:
          text: mode
          type: identifier
        pattern:
          text: ' dictation'
          type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: copy
          type: word
        - text: to
          type: word
        - text: vocab
          type: word
        - type: optional
          children:
          - type: seq
            children:
            - text: as
              type: word
            - type: capture
              capture_name:
                text: phrase
                type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.add_selection_to_vocabulary
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: binary_operator
              left:
                type: variable
                variable_name:
                  text: phrase
                  type: identifier
              operator:
                text: or
                type: operator
              right:
                type: string
                children: []
  - text: "# Automatically adds possessive form by appending \"'s\"."
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: copy
          type: word
        - text: name
          type: word
        - text: to
          type: word
        - text: vocab
          type: word
        - type: optional
          children:
          - type: seq
            children:
            - text: as
              type: word
            - type: capture
              capture_name:
                text: phrase
                type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.add_selection_to_vocabulary
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: binary_operator
              left:
                type: variable
                variable_name:
                  text: phrase
                  type: identifier
              operator:
                text: or
                type: operator
              right:
                type: string
                children: []
            - type: string
              children:
              - text: name
                type: string_content
  - text: '# Automatically adds plural form by simply appending "s".'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: copy
          type: word
        - text: noun
          type: word
        - text: to
          type: word
        - text: vocab
          type: word
        - type: optional
          children:
          - type: seq
            children:
            - text: as
              type: word
            - type: capture
              capture_name:
                text: phrase
                type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.add_selection_to_vocabulary
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: binary_operator
              left:
                type: variable
                variable_name:
                  text: phrase
                  type: identifier
              operator:
                text: or
                type: operator
              right:
                type: string
                children: []
            - type: string
              children:
              - text: noun
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: copy
          type: word
        - text: to
          type: word
        - text: replacements
          type: word
        - text: as
          type: word
        - type: capture
          capture_name:
            text: phrase
            type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.add_selection_to_words_to_replace
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: variable
              variable_name:
                text: phrase
                type: identifier
  - text: "# Automatically adds possessive form by appending \"'s\"."
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: copy
          type: word
        - text: name
          type: word
        - text: to
          type: word
        - text: replacements
          type: word
        - text: as
          type: word
        - type: capture
          capture_name:
            text: phrase
            type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.add_selection_to_words_to_replace
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: variable
              variable_name:
                text: phrase
                type: identifier
            - type: string
              children:
              - text: name
                type: string_content
  - text: '# Automatically adds plural form by simply appending "s".'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: copy
          type: word
        - text: noun
          type: word
        - text: to
          type: word
        - text: replacements
          type: word
        - text: as
          type: word
        - type: capture
          capture_name:
            text: phrase
            type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.add_selection_to_words_to_replace
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: variable
              variable_name:
                text: phrase
                type: identifier
            - type: string
              children:
              - text: noun
                type: string_content
