input: "os: mac\napp: slack\n-\ntag(): user.messaging\ntag(): user.emoji\n# Workspace\n\
  workspace <number>: key(\"cmd-{number}\")\n# Channel\n(slack | lack) [channel] info:\
  \ key(cmd-shift-i)\n# Navigation\nfocus (move | next): key(ctrl-`)\n(section | zone)\
  \ [next]: key(f6)\n(section | zone) (previous | last): key(shift-f6)\n(slack | lack)\
  \ [direct] messages: key(cmd-shift-k)\n(slack | lack) threads: key(cmd-shift-t)\n\
  (slack | lack) (history [next] | back | backward): key(cmd-[)\n(slack | lack) forward:\
  \ key(cmd-])\n(element | bit) [next]: key(tab)\n(element | bit) (previous | last):\
  \ key(shift-tab)\n(slack | lack) (my stuff | activity): key(cmd-shift-m)\n(slack\
  \ | lack) directory: key(cmd-shift-e)\n(slack | lack) (starred [items] | stars):\
  \ key(cmd-shift-s)\n(slack | lack) unread [messages]: key(cmd-shift-a)\n(go | undo\
  \ | toggle) full: key(ctrl-cmd-f)\n# Messaging\ngrab left: key(shift-up)\ngrab right:\
  \ key(shift-down)\nadd line: key(shift-enter)\n(slack | lack) (slap | slaw | slapper):\
  \ key(cmd-right shift-enter)\n(slack | lack) (react | reaction): key(cmd-shift-\\\
  )\n(insert command | commandify): key(cmd-shift-c)\ninsert link: key(cmd-shift-u)\n\
  insert code: key(cmd-shift-alt-c)\n(slack | lack) (bull | bullet | bulleted) [list]:\
  \ key(cmd-shift-8)\n(slack | lack) (number | numbered) [list]: key(cmd-shift-7)\n\
  (slack | lack) (quotes | quotation): key(cmd-shift->)\nbold: key(cmd-b)\n(italic\
  \ | italicize): key(cmd-i)\n(strike | strikethrough): key(cmd-shift-x)\n(slack |\
  \ lack) snippet: key(cmd-shift-enter)\n# Calls\n([toggle] mute | unmute): key(m)\n\
  (slack | lack) huddle: key(cmd-shift-h)\n(slack | lack) ([toggle] video): key(v)\n\
  (slack | lack) invite: key(a)\n# Miscellaneous\n(slack | lack) shortcuts: key(cmd-/)\n\
  emote <user.text>: \"{text}\"\ntoggle left sidebar: key(cmd-shift-d)\ntoggle right\
  \ sidebar: key(cmd-.)\n\n# DEPRECATED\n(move | next) focus:\n    app.notify(\"please\
  \ use the voice command 'focus next' instead of 'next focus'\")\n    key(ctrl-`)\n\
  [next] (section | zone):\n    app.notify(\"please use the voice command 'section\
  \ next' instead of 'next section'\")\n    key(f6)\n(previous | last) (section |\
  \ zone):\n    app.notify(\"please use the voice command 'section last' instead of\
  \ 'last section'\")\n    key(shift-f6)\n[next] (element | bit):\n    app.notify(\"\
  please use the voice command 'element next' instead of 'next element'\")\n    key(tab)\n\
  (previous | last) (element | bit):\n    app.notify(\"please use the voice command\
  \ 'element last' instead of 'last element'\")\n    key(shift-tab)\n"
output:
  type: source_file
  children:
  - type: context
    children:
    - type: or
      children:
      - type: match
        key:
          text: os
          type: identifier
        pattern:
          text: ' mac'
          type: implicit_string
      - type: match
        key:
          text: app
          type: identifier
        pattern:
          text: ' slack'
          type: implicit_string
  - type: include_tag
    tag:
      text: user.messaging
      type: identifier
  - type: include_tag
    tag:
      text: user.emoji
      type: identifier
  - text: '# Workspace'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: workspace
          type: word
        - type: capture
          capture_name:
            text: number
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: '"cmd-{number}"'
            type: implicit_string
  - text: '# Channel'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: optional
          children:
          - text: channel
            type: word
        - text: info
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-i
            type: implicit_string
  - text: '# Navigation'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: focus
          type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: move
              type: word
            - text: next
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: ctrl-`
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: section
              type: word
            - text: zone
              type: word
        - type: optional
          children:
          - text: next
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: f6
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: section
              type: word
            - text: zone
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: previous
              type: word
            - text: last
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-f6
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: optional
          children:
          - text: direct
            type: word
        - text: messages
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-k
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: threads
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-t
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - type: seq
              children:
              - text: history
                type: word
              - type: optional
                children:
                - text: next
                  type: word
            - text: back
              type: word
            - text: backward
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-[
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: forward
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-]
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: element
              type: word
            - text: bit
              type: word
        - type: optional
          children:
          - text: next
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: tab
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: element
              type: word
            - text: bit
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: previous
              type: word
            - text: last
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-tab
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - type: seq
              children:
              - text: my
                type: word
              - text: stuff
                type: word
            - text: activity
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-m
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: directory
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-e
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - type: seq
              children:
              - text: starred
                type: word
              - type: optional
                children:
                - text: items
                  type: word
            - text: stars
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-s
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: unread
          type: word
        - type: optional
          children:
          - text: messages
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-a
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: go
              type: word
            - text: undo
              type: word
            - text: toggle
              type: word
        - text: full
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: ctrl-cmd-f
            type: implicit_string
  - text: '# Messaging'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: grab
          type: word
        - text: left
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-up
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: grab
          type: word
        - text: right
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-down
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: add
          type: word
        - text: line
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-enter
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slap
              type: word
            - text: slaw
              type: word
            - text: slapper
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-right shift-enter
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: react
              type: word
            - text: reaction
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-\
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: parenthesized_rule
        children:
        - type: choice
          children:
          - type: seq
            children:
            - text: insert
              type: word
            - text: command
              type: word
          - text: commandify
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-c
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: insert
          type: word
        - text: link
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-u
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: insert
          type: word
        - text: code
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-alt-c
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: bull
              type: word
            - text: bullet
              type: word
            - text: bulleted
              type: word
        - type: optional
          children:
          - text: list
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-8
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: number
              type: word
            - text: numbered
              type: word
        - type: optional
          children:
          - text: list
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-7
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: quotes
              type: word
            - text: quotation
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift->
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - text: bold
        type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-b
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: parenthesized_rule
        children:
        - type: choice
          children:
          - text: italic
            type: word
          - text: italicize
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-i
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: parenthesized_rule
        children:
        - type: choice
          children:
          - text: strike
            type: word
          - text: strikethrough
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-x
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: snippet
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-enter
            type: implicit_string
  - text: '# Calls'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: parenthesized_rule
        children:
        - type: choice
          children:
          - type: seq
            children:
            - type: optional
              children:
              - text: toggle
                type: word
            - text: mute
              type: word
          - text: unmute
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: m
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: huddle
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-h
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - type: parenthesized_rule
          children:
          - type: seq
            children:
            - type: optional
              children:
              - text: toggle
                type: word
            - text: video
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: v
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: invite
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: a
            type: implicit_string
  - text: '# Miscellaneous'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: slack
              type: word
            - text: lack
              type: word
        - text: shortcuts
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-/
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: emote
          type: word
        - type: capture
          capture_name:
            text: user.text
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: string
          children:
          - text: '{'
            type: string_content
          - text: text
            type: string_content
          - text: '}'
            type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: toggle
          type: word
        - text: left
          type: word
        - text: sidebar
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-shift-d
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: toggle
          type: word
        - text: right
          type: word
        - text: sidebar
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: cmd-.
            type: implicit_string
  - text: '# DEPRECATED'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: move
              type: word
            - text: next
              type: word
        - text: focus
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: app.notify
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: please use the voice command 'focus next' instead of 'next focus'
                type: string_content
      - type: expression
        expression:
          type: key_action
          arguments:
            text: ctrl-`
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: optional
          children:
          - text: next
            type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: section
              type: word
            - text: zone
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: app.notify
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: please use the voice command 'section next' instead of 'next
                  section'
                type: string_content
      - type: expression
        expression:
          type: key_action
          arguments:
            text: f6
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: previous
              type: word
            - text: last
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: section
              type: word
            - text: zone
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: app.notify
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: please use the voice command 'section last' instead of 'last
                  section'
                type: string_content
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-f6
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: optional
          children:
          - text: next
            type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: element
              type: word
            - text: bit
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: app.notify
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: please use the voice command 'element next' instead of 'next
                  element'
                type: string_content
      - type: expression
        expression:
          type: key_action
          arguments:
            text: tab
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: previous
              type: word
            - text: last
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: element
              type: word
            - text: bit
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: app.notify
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: please use the voice command 'element last' instead of 'last
                  element'
                type: string_content
      - type: expression
        expression:
          type: key_action
          arguments:
            text: shift-tab
            type: implicit_string
