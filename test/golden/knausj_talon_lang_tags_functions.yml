input: "tag: user.code_functions\n-\n# Default implementation of capture listens for\
  \ the following keywords in any\n# order: private pro pub static\n#\n# The default\
  \ action implementation looks for the token combination on the left\n# (funky is\
  \ added here for searchability) and calls the function on the right:\n#\n#   * funky\
  \ -> code_default_function\n#   * private funky -> code_private_function\n#   *\
  \ pro funky -> code_protected_function\n#   * pub funky -> code_public_function\n\
  #   * static funky -> code_private_static_function\n#   * private static funky ->\
  \ code_private_static_function\n#   * pro static funky -> code_protected_static_function\n\
  #   * pub static funky -> code_public_static_function\n#\n^{user.code_function_modifier}*\
  \ funky <user.text>$:\n  user.code_modified_function(code_function_modifier_list\
  \ or 0, text)\n\n# for annotating function parameters\nis type <user.code_type>:\
  \ user.code_insert_type_annotation(code_type)\nreturns [type] <user.code_type>:\
  \ user.code_insert_return_type(code_type)\n\n# for generic reference of types\n\
  type <user.code_type>: insert(code_type)\n"
output:
  type: source_file
  children:
  - type: context
    children:
    - type: match
      key:
        text: tag
        type: identifier
      pattern:
        text: ' user.code_functions'
        type: implicit_string
  - text: '# Default implementation of capture listens for the following keywords
      in any'
    type: comment
  - text: '# order: private pro pub static'
    type: comment
  - text: '#'
    type: comment
  - text: '# The default action implementation looks for the token combination on
      the left'
    type: comment
  - text: '# (funky is added here for searchability) and calls the function on the
      right:'
    type: comment
  - text: '#'
    type: comment
  - text: '#   * funky -> code_default_function'
    type: comment
  - text: '#   * private funky -> code_private_function'
    type: comment
  - text: '#   * pro funky -> code_protected_function'
    type: comment
  - text: '#   * pub funky -> code_public_function'
    type: comment
  - text: '#   * static funky -> code_private_static_function'
    type: comment
  - text: '#   * private static funky -> code_private_static_function'
    type: comment
  - text: '#   * pro static funky -> code_protected_static_function'
    type: comment
  - text: '#   * pub static funky -> code_public_static_function'
    type: comment
  - text: '#'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - text: ^
        type: start_anchor
      - type: seq
        children:
        - type: repeat
          children:
          - type: list
            list_name:
              text: user.code_function_modifier
              type: identifier
        - text: funky
          type: word
        - type: capture
          capture_name:
            text: user.text
            type: identifier
      - text: $
        type: end_anchor
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.code_modified_function
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: binary_operator
              left:
                type: variable
                variable_name:
                  text: code_function_modifier_list
                  type: identifier
              operator:
                text: or
                type: operator
              right:
                text: '0'
                type: integer
            - type: variable
              variable_name:
                text: text
                type: identifier
  - text: '# for annotating function parameters'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: is
          type: word
        - text: type
          type: word
        - type: capture
          capture_name:
            text: user.code_type
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.code_insert_type_annotation
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: variable
              variable_name:
                text: code_type
                type: identifier
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: returns
          type: word
        - type: optional
          children:
          - text: type
            type: word
        - type: capture
          capture_name:
            text: user.code_type
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.code_insert_return_type
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: variable
              variable_name:
                text: code_type
                type: identifier
  - text: '# for generic reference of types'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: type
          type: word
        - type: capture
          capture_name:
            text: user.code_type
            type: identifier
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: insert
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: variable
              variable_name:
                text: code_type
                type: identifier
