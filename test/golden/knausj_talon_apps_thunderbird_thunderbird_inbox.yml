input: "app: thunderbird_inbox\n-\n# navigate\n(mail | message) open: key(enter)\n\
  (mail | message) (up | last): key(b)\n(mail | message) (down | next): key(f)\nunread\
  \ [mail | message] (up | last): key(p)\nunread [mail | message] (down | next): key(n)\n\
  go home: key(alt-home)\ntoggle (mail | message) [pane]: key(f8)\n# mark\n(mail |\
  \ message) (favorite | unfavorite): key(s)\n(mail | message) (read | unread): key(m)\n\
  (mail | message) (watch | unwatch): key(w)\n(mail | message) (ignore | unignore):\
  \ key(k)\n(mail | message) suspend: key(c)\n(mail | message) spam: key(j)\n# send\n\
  (mail | message) new: user.thunderbird_mod(\"n\")\n(mail | message) edit: user.thunderbird_mod(\"\
  e\")\n(mail | message) reply sender: user.thunderbird_mod(\"r\")\n(mail | message)\
  \ reply all: user.thunderbird_mod(\"shift-r\")\n(mail | message) reply list: user.thunderbird_mod(\"\
  shift-l\")\n(mail | message) forward: user.thunderbird_mod(\"l\")\n# organize\n\
  (mail | message) delete: key(delete)\n(mail | message) archive: key(a)\n(mail |\
  \ message) save: user.thunderbird_mod(\"s\")\n(mail | message) print: user.thunderbird_mod(\"\
  p\")\n"
output:
  type: source_file
  children:
  - type: context
    children:
    - type: match
      key:
        text: app
        type: identifier
      pattern:
        text: ' thunderbird_inbox'
        type: implicit_string
  - text: '# navigate'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: open
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: enter
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: up
              type: word
            - text: last
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: b
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: down
              type: word
            - text: next
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: f
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: unread
          type: word
        - type: optional
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: up
              type: word
            - text: last
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: p
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: unread
          type: word
        - type: optional
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: down
              type: word
            - text: next
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: n
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: go
          type: word
        - text: home
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: alt-home
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - text: toggle
          type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: optional
          children:
          - text: pane
            type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: f8
            type: implicit_string
  - text: '# mark'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: favorite
              type: word
            - text: unfavorite
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: s
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: read
              type: word
            - text: unread
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: m
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: watch
              type: word
            - text: unwatch
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: w
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: ignore
              type: word
            - text: unignore
              type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: k
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: suspend
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: c
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: spam
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: j
            type: implicit_string
  - text: '# send'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: new
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: n
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: edit
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: e
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: reply
          type: word
        - text: sender
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: r
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: reply
          type: word
        - text: all
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: shift-r
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: reply
          type: word
        - text: list
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: shift-l
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: forward
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: l
                type: string_content
  - text: '# organize'
    type: comment
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: delete
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: delete
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: archive
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: key_action
          arguments:
            text: a
            type: implicit_string
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: save
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: s
                type: string_content
  - type: command
    rule:
      type: rule
      children:
      - type: seq
        children:
        - type: parenthesized_rule
          children:
          - type: choice
            children:
            - text: mail
              type: word
            - text: message
              type: word
        - text: print
          type: word
    script:
      type: block
      children:
      - type: expression
        expression:
          type: action
          action_name:
            text: user.thunderbird_mod
            type: identifier
          arguments:
            type: argument_list
            children:
            - type: string
              children:
              - text: p
                type: string_content
